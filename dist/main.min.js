var Overlay={};Overlay.Shapes={},function(){function a(a){c(a);for(var d=0;d<j.length;d++)b(i.Ellipse,a,j[d],{type:"normal"})}function b(a,b,c,d){component=$("#"+c.id),offset=component.offset(),x=offset.left-$(window).scrollLeft()-c.padding,y=offset.top-$(window).scrollTop()-c.padding,w=component.innerWidth()+2*c.padding,h=component.innerHeight()+2*c.padding,a.draw(b,d,x,y,w,h)}function c(a){a.save(),a.fillStyle=g,a.fillRect(0,0,d.width,d.height),a.restore()}var d,e,f=82764,g="rgba(0, 0, 0, 0.70)",i=Overlay.Shapes,j=[];this.init=function(){0===$("#"+f).length&&(d=$("<canvas/>",{id:f}).appendTo("body").css({display:"block",position:"fixed",top:0,left:0,"z-index":16232})[0],e=d.getContext("2d"),this.refresh(),window.addEventListener("resize",this.refresh,!1))},this.refresh=function(){d.width=window.innerWidth,d.height=window.innerHeight,a(e)},this.add=function(a){"[object String]"===Object.prototype.toString.call(a)&&(a={id:a,padding:0}),j.push(a),this.refresh()}}.call(Overlay),Overlay.Shapes.Ellipse={},function(){this.draw=function(a,b,c,d,e,f){var g;"normal"===b.type?g=getEllipseDimension(e,f):"proportional"===b.type&&(g=getEllipseDimensionWithSameProportion(e,f)),drawEllipse(a,c+e/2,d+f/2,g.width,g.height)},getEllipseDimensionWithSameProportion=function(a,b){return{width:2*a/Math.sqrt(2),height:2*b/Math.sqrt(2)}},getEllipseDimension=function(a,b){for(testEllipseWidth=function(a,b,c){var d=b*b,e=c*c,f=4*a*a,g=2*a+c-b;return d/f+e/(g*g)},width1=.5*a,width2=2*width1;testEllipseWidth(width2,a,b)>1;)width2=2*width2;for(;width2-width1>1;)width3=Math.round((width1+width2)/2),testEllipseWidth(width3,a,b)>1?width1=width3:width2=width3;return width=1-testEllipseWidth(width2,a,b)>1-testEllipseWidth(width1,a,b)?width1:width2,width*=2,height=width-a+b,{width:width,height:height}},drawEllipse=function(a,b,c,d,e){a.save(),a.globalCompositeOperation="destination-out",a.translate(b,c),a.scale(d,e),a.beginPath(),a.arc(0,0,.5,0,2*Math.PI,!1),a.fill(),a.restore()}}.call(Overlay.Shapes.Ellipse);